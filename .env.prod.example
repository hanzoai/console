# More information: https://hanzo.com/docs/deployment/self-host

# When adding additional environment variables, the schema in "/src/env.mjs"
# should be updated accordingly.

# Prisma
# https://www.prisma.io/docs/reference/database-reference/connection-urls#env
# DATABASE_URL supports pooled connections, but then you need to set DIRECT_URL
DATABASE_URL="postgresql://postgres:postgres@db:5432/postgres"
# DIRECT_URL="postgresql://postgres:postgres@db:5432/postgres"
# SHADOW_DATABASE_URL=
# optional, set to true to disable automated database migrations on Docker start
# HANZO_AUTO_POSTGRES_MIGRATION_DISABLED=

# Next Auth
# NEXTAUTH_URL does not need to be set when deploying on Vercel
NEXTAUTH_URL="http://localhost:3000"

# For each of these, you can generate a new secret on the command line with:
# openssl rand -base64 32
NEXTAUTH_SECRET="secret" # https://next-auth.js.org/configuration/options#secret
SALT="salt" # salt used to hash api keys

# API level encryption for sensitive data
# Must be 256 bits, 64 string characters in hex format, generate via: openssl rand -hex 32
ENCRYPTION_KEY="0000000000000000000000000000000000000000000000000000000000000000"

# Use CSP headers to enforce HTTPS, optional
# HANZO_CSP_ENFORCE_HTTPS="true"

# Configure base path for self-hosting, optional
# Note: You need to build the docker image with the base path set and cannot use the pre-built docker image if you set this.
# NEXT_PUBLIC_BASE_PATH="/app"

# Docker only, optional
# PORT=3000
# HOSTNAME=localhost

# Opentelemetry, optional
OTEL_EXPORTER_OTLP_ENDPOINT="http://localhost:4318"
OTEL_SERVICE_NAME="hanzo"

# Default role for users who sign up, optional, can be org or org+project
# Supports comma-separated IDs for multiple orgs (e.g., "org1,org2,org3")
# HANZO_DEFAULT_ORG_ID=
# HANZO_DEFAULT_ORG_ROLE=
# Supports comma-separated IDs for multiple projects (e.g., "proj1,proj2,proj3")
# HANZO_DEFAULT_PROJECT_ID=
# HANZO_DEFAULT_PROJECT_ROLE=

# Logging, optional
# HANZO_LOG_LEVEL=info
# HANZO_LOG_FORMAT=text

# Enable experimental features, optional
# HANZO_ENABLE_EXPERIMENTAL_FEATURES=false

# Auth, optional configuration
# AUTH_DOMAINS_WITH_SSO_ENFORCEMENT=domain1.com,domain2.com
# AUTH_IGNORE_ACCOUNT_FIELDS=foo,bar
# AUTH_DISABLE_USERNAME_PASSWORD=true
# AUTH_DISABLE_SIGNUP=true
# AUTH_SESSION_MAX_AGE=43200 # 30 days in minutes (default)

# SSO, each group is optional
# AUTH_GOOGLE_CLIENT_ID=
# AUTH_GOOGLE_CLIENT_SECRET=
# AUTH_GOOGLE_ALLOW_ACCOUNT_LINKING=false
# AUTH_GOOGLE_ALLOWED_DOMAINS=hanzo.ai,google.com # optional allowlist of workspace domains that can sign in via Google
# AUTH_GOOGLE_CLIENT_AUTH_METHOD=
# AUTH_GOOGLE_CHECKS=
# AUTH_GITHUB_CLIENT_ID=
# AUTH_GITHUB_CLIENT_SECRET=
# AUTH_GITHUB_ALLOW_ACCOUNT_LINKING=false
# AUTH_GITHUB_CLIENT_AUTH_METHOD=
# AUTH_GITHUB_CHECKS=
# AUTH_GITHUB_ENTERPRISE_CLIENT_ID=
# AUTH_GITHUB_ENTERPRISE_CLIENT_SECRET=
# AUTH_GITHUB_ENTERPRISE_BASE_URL=
# AUTH_GITHUB_ENTERPRISE_ALLOW_ACCOUNT_LINKING=false
# AUTH_GITHUB_ENTERPRISE_CLIENT_AUTH_METHOD=
# AUTH_GITHUB_ENTERPRISE_CHECKS=
# AUTH_GITLAB_CLIENT_ID=
# AUTH_GITLAB_CLIENT_SECRET=
# AUTH_GITLAB_ALLOW_ACCOUNT_LINKING=false
# AUTH_GITLAB_ISSUER=
# AUTH_GITLAB_CLIENT_AUTH_METHOD=
# AUTH_GITLAB_CHECKS=
# AUTH_GITLAB_URL=
# AUTH_AZURE_AD_CLIENT_ID=
# AUTH_AZURE_AD_CLIENT_SECRET=
# AUTH_AZURE_AD_TENANT_ID=
# AUTH_AZURE_AD_ALLOW_ACCOUNT_LINKING=false
# AUTH_AZURE_AD_CLIENT_AUTH_METHOD=
# AUTH_AZURE_AD_CHECKS=
# AUTH_OKTA_CLIENT_ID=
# AUTH_OKTA_CLIENT_SECRET=
# AUTH_OKTA_ISSUER=
# AUTH_OKTA_ALLOW_ACCOUNT_LINKING=false
# AUTH_OKTA_CLIENT_AUTH_METHOD=
# AUTH_OKTA_CHECKS=
# AUTH_AUTH0_CLIENT_ID=
# AUTH_AUTH0_CLIENT_SECRET=
# AUTH_AUTH0_ISSUER=
# AUTH_AUTH0_ALLOW_ACCOUNT_LINKING=false
# AUTH_AUTH0_CLIENT_AUTH_METHOD=
# AUTH_AUTH0_CHECKS=
# AUTH_COGNITO_CLIENT_ID=
# AUTH_COGNITO_CLIENT_SECRET=
# AUTH_COGNITO_ISSUER=
# AUTH_COGNITO_ALLOW_ACCOUNT_LINKING=false
# AUTH_COGNITO_CLIENT_AUTH_METHOD=
# AUTH_COGNITO_CHECKS=
# AUTH_KEYCLOAK_CLIENT_ID=
# AUTH_KEYCLOAK_CLIENT_SECRET=
# AUTH_KEYCLOAK_ISSUER=
# AUTH_KEYCLOAK_ALLOW_ACCOUNT_LINKING=false
# AUTH_KEYCLOAK_CLIENT_AUTH_METHOD=
# AUTH_KEYCLOAK_CHECKS=
# AUTH_KEYCLOAK_NAME=
# AUTH_WORKOS_CLIENT_ID=
# AUTH_WORKOS_CLIENT_SECRET=
# AUTH_WORKOS_ALLOW_ACCOUNT_LINKING=false
# AUTH_WORKOS_ORGANIZATION_ID=
# AUTH_WORKOS_CONNECTION_ID=
# AUTH_CUSTOM_CLIENT_ID=
# AUTH_CUSTOM_CLIENT_SECRET=
# AUTH_CUSTOM_ISSUER=
# AUTH_CUSTOM_NAME=
# AUTH_CUSTOM_SCOPE="openid email profile" # optional
# AUTH_CUSTOM_CLIENT_AUTH_METHOD="client_secret_basic" # optional
# AUTH_CUSTOM_ALLOW_ACCOUNT_LINKING=false
# AUTH_CUSTOM_ID_TOKEN=false # optional, default is true
# AUTH_CUSTOM_CLIENT_AUTH_METHOD=
# AUTH_CUSTOM_CHECKS=
# AUTH_JUMPCLOUD_CLIENT_ID=
# AUTH_JUMPCLOUD_CLIENT_SECRET=
# AUTH_JUMPCLOUD_ISSUER=
# AUTH_JUMPCLOUD_ALLOW_ACCOUNT_LINKING=
# AUTH_JUMPCLOUD_CLIENT_AUTH_METHOD=
# AUTH_JUMPCLOUD_CHECKS=
# AUTH_JUMPCLOUD_SCOPE=

# Transactional email, optional
# Defines the email address to use as the from address.
# EMAIL_FROM_ADDRESS=
# Defines the connection url for smtp server.
# SMTP_CONNECTION_URL=

# S3 Batch Exports
# HANZO_S3_BATCH_EXPORT_ENABLED=
# HANZO_S3_BATCH_EXPORT_BUCKET=
# HANZO_S3_BATCH_EXPORT_ACCESS_KEY_ID=
# HANZO_S3_BATCH_EXPORT_SECRET_ACCESS_KEY=
# HANZO_S3_BATCH_EXPORT_REGION=
# HANZO_S3_BATCH_EXPORT_ENDPOINT=
# HANZO_S3_BATCH_EXPORT_PREFIX=

# S3 storage for events, optional, used to persist all incoming events
# HANZO_S3_EVENT_UPLOAD_BUCKET=
# Optional prefix to be used within the bucket. Must end with `/` if set
# HANZO_S3_EVENT_UPLOAD_PREFIX=events/
# The following four options are optional and fallback to the normal SDK credential provider chain if omitted
# See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/setting-credentials-node.html
# HANZO_S3_EVENT_UPLOAD_ENDPOINT=
# HANZO_S3_EVENT_UPLOAD_REGION=
# HANZO_S3_EVENT_UPLOAD_ACCESS_KEY_ID=
# HANZO_S3_EVENT_UPLOAD_SECRET_ACCESS_KEY=
# Whether to use blob_storage_file_log table to manage blob storage events
# Can be set to `false` if `event` entities are managed using lifecycle policies in the blob storage bucket.
HANZO_ENABLE_BLOB_STORAGE_FILE_LOG=true

# Automated provisioning of default resources
# HANZO_INIT_ORG_ID=org-id
# HANZO_INIT_ORG_NAME=org-name
# HANZO_INIT_ORG_IDS=hanzo,lux,zoo,pars
# HANZO_INIT_ORG_NAMES=Hanzo,Lux,Zoo,Pars
# HANZO_INIT_PROJECT_ID=project-id
# HANZO_INIT_PROJECT_ORG_ID=org-id # recommended when HANZO_INIT_ORG_IDS sets multiple orgs
# HANZO_INIT_PROJECT_NAME=project-name
# HANZO_INIT_PROJECT_PUBLIC_KEY=pk-1234567890
# HANZO_INIT_PROJECT_SECRET_KEY=sk-1234567890
# HANZO_INIT_USER_EMAIL=user@example.com # adds OWNER membership to init orgs; creates user if password is also set
# HANZO_INIT_USER_NAME=User Name
# HANZO_INIT_USER_PASSWORD=password

# Redis configuration
# REDIS_HOST=
# REDIS_PORT=
# REDIS_AUTH=
# REDIS_USERNAME=default
# REDIS_CONNECTION_STRING=
# REDIS_ENABLE_AUTO_PIPELINING=

# Redis Cluster configuration (optional)
# REDIS_CLUSTER_ENABLED=false
# REDIS_CLUSTER_NODES=redis-node1:6379,redis-node2:6379,redis-node3:6379

# Redis Sentinel configuration (optional, cannot be enabled with cluster mode simultaneously)
# REDIS_SENTINEL_ENABLED=false
# REDIS_SENTINEL_NODES=sentinel1:26379,sentinel2:26379,sentinel3:26379
# REDIS_SENTINEL_MASTER_NAME=mymaster
# REDIS_SENTINEL_USERNAME=
# REDIS_SENTINEL_PASSWORD=

# Cache configuration
# HANZO_CACHE_API_KEY_ENABLED=
# HANZO_CACHE_API_KEY_TTL_SECONDS=
# HANZO_CACHE_PROMPT_ENABLED=
# HANZO_CACHE_PROMPT_TTL_SECONDS=

# Clickhouse configuration
# CLICKHOUSE_URL=
# CLICKHOUSE_CLUSTER_NAME=default
# CLICKHOUSE_DB=default
# CLICKHOUSE_USER=
# CLICKHOUSE_PASSWORD=
# CLICKHOUSE_CLUSTER_ENABLED=true

# Ingestion configuration
# HANZO_INGESTION_QUEUE_DELAY_MS=
# HANZO_INGESTION_CLICKHOUSE_WRITE_BATCH_SIZE=
# HANZO_INGESTION_CLICKHOUSE_WRITE_INTERVAL_MS=
# HANZO_INGESTION_CLICKHOUSE_MAX_ATTEMPTS=

# API Traces endpoint controls (may induce breaking changes on API when changed!)
# Reject GET /api/public/traces requests that do not include a fromTimestamp parameter (returns 400)
# HANZO_API_TRACES_REJECT_NO_DATE_RANGE=false
# Apply a default date range (in days) to GET /api/public/traces when no fromTimestamp is provided
# HANZO_API_TRACES_DEFAULT_DATE_RANGE_DAYS=
# Comma-separated default field groups for GET /api/public/traces when no fields param is provided
# Valid values: core, io, scores, observations, metrics
# HANZO_API_TRACES_DEFAULT_FIELDS=

### START Enterprise Edition Configuration

# Allowlisted users that can create new organizations, by default all users can create organizations
# HANZO_ALLOWED_ORGANIZATION_CREATORS=user1@hanzo.com,user2@hanzo.com

# UI Customization Options
# HANZO_UI_API_HOST=https://api.example.com
# HANZO_UI_DOCUMENTATION_HREF=https://docs.example.com
# HANZO_UI_SUPPORT_HREF=https://support.example.com
# HANZO_UI_FEEDBACK_HREF=https://feedback.example.com
# HANZO_UI_LOGO_LIGHT_MODE_HREF=https://static.hanzo.com/hanzo-dev/example-logo-light-mode.png
# HANZO_UI_LOGO_DARK_MODE_HREF=https://static.hanzo.com/hanzo-dev/example-logo-dark-mode.png
# HANZO_UI_DEFAULT_MODEL_ADAPTER=Anthropic # OpenAI, Anthropic, Azure
# HANZO_UI_DEFAULT_BASE_URL_OPENAI=https://api.openai.com/v1
# HANZO_UI_DEFAULT_BASE_URL_ANTHROPIC=https://api.anthropic.com
# HANZO_UI_DEFAULT_BASE_URL_AZURE_OPENAI=https://{instanceName}.openai.azure.com/openai/deployments
# HANZO_UI_VISIBLE_PRODUCT_MODULES=
# HANZO_UI_HIDDEN_PRODUCT_MODULES=

### END Enterprise Edition Configuration


### START Commerce / Billing Config
# Commerce API for billing, subscriptions, payments, credits
COMMERCE_API_URL="http://commerce.hanzo.svc.cluster.local:8001"
COMMERCE_SERVICE_TOKEN="your-commerce-service-token"

### START Hanzo Cloud Config
# Used for Hanzo Cloud deployments
# Not recommended for self-hosted deployments as these are NOT COVERED BY SEMANTIC VERSIONING

# NEXT_PUBLIC_HANZO_CLOUD_REGION="US"
# NEXTAUTH_COOKIE_DOMAIN=".hanzo.com"

# HANZO_TEAM_SLACK_WEBHOOK=
# HANZO_NEW_USER_SIGNUP_WEBHOOK=

# Posthog (optional for analytics of web ui)
# NEXT_PUBLIC_POSTHOG_HOST=
# NEXT_PUBLIC_POSTHOG_KEY=

# Sentry
# NEXT_PUBLIC_HANZO_TRACING_SAMPLE_RATE
# NEXT_PUBLIC_SENTRY_DSN=
# NEXT_SENTRY_ORG=
# NEXT_SENTRY_PROJECT=
# SENTRY_AUTH_TOKEN=
# SENTRY_CSP_REPORT_URI=


# Demo project that users can use to try the platform
# NEXT_PUBLIC_DEMO_ORG_ID=
# NEXT_PUBLIC_DEMO_PROJECT_ID=

# Plain Chat
# NEXT_PUBLIC_PLAIN_APP_ID=
# PLAIN_AUTHENTICATION_SECRET=
# PLAIN_API_KEY=
# PLAIN_CARDS_API_TOKEN=

# Admin API
# ADMIN_API_KEY=
# HANZO_CACHE_MODEL_MATCH_ENABLED=
# HANZO_CACHE_MODEL_MATCH_TTL_SECONDS=

# Rate limiting
# HANZO_RATE_LIMITS_ENABLED=

# Free tier usage thresholds (Cloud deployments only)
# Enable the queue consumer that monitors free tier usage (default: true, but requires cloud region)
# QUEUE_CONSUMER_FREE_TIER_USAGE_THRESHOLD_QUEUE_IS_ENABLED=true
# Enable enforcement: send emails and block orgs that exceed free tier limits (default: false)
# HANZO_FREE_TIER_USAGE_THRESHOLD_ENFORCEMENT_ENABLED=false
# Optional BCC address for usage threshold emails (e.g., for CRM integration like HubSpot)
# CLOUD_CRM_EMAIL=

# Stripe
# STRIPE_SECRET_KEY=
# STRIPE_WEBHOOK_SIGNING_SECRET=

# Betterstack Status Page
# BETTERSTACK_UPTIME_API_KEY=
# BETTERSTACK_UPTIME_STATUS_PAGE_ID=

### END Hanzo Cloud Config


### START Hanzo CI Config

# HANZO_INIT_ORG_CLOUD_PLAN=

### END Hanzo CI Config
